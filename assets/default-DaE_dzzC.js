import{p as w,g as N,F,L as Y,D as P,P as c,a1 as O,a2 as q,O as T,E as G,G as Q,I as ae,M as le,k as Z,j as oe,l as ne,n as J,i as se,h as re,s as B,c as b,B as ie,V as ue,Q as R,a as I,a3 as ce,v as K,d as de,w as H,o as ve,b as ge,r as me,y as A,u as fe,z as be,H as he,e as ye,R as E,a4 as Se,a5 as Ve,a6 as Te,a7 as xe,a8 as ke,a9 as Be,aa as _e,ab as Ce,ac as we,ad as Ne,ae as Pe,af as Ie,ag as He,ah as Le,W as Ee,ai as Re,X as D,Y as _,U as M,aj as Ae,Z as De,_ as k,ak as L,al as U,am as z,a0 as Me,an as X,ao as Ue,$,ap as ze}from"./index-Cw2Y8HBU.js";import{u as $e}from"./ssrBoot-dPUpzATT.js";import{V as Fe}from"./VMain-DraVnSOK.js";import{V as Ye}from"./VContainer-Cmv1GKew.js";const p=w({text:String,...Y(),...F()},"VToolbarTitle"),ee=N()({name:"VToolbarTitle",props:p(),setup(e,l){let{slots:t}=l;return P(()=>{const v=!!(t.default||t.text||e.text);return c(e.tag,{class:q(["v-toolbar-title",e.class]),style:O(e.style)},{default:()=>{var r;return[v&&T("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(r=t.default)==null?void 0:r.call(t)])]}})}),{}}}),We=[null,"prominent","default","comfortable","compact"],te=w({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>We.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...le(),...Y(),...ae(),...Q(),...F({tag:"header"}),...G()},"VToolbar"),j=N()({name:"VToolbar",props:te(),setup(e,l){var h;let{slots:t}=l;const{backgroundColorClasses:v,backgroundColorStyles:r}=Z(()=>e.color),{borderClasses:a}=oe(e),{elevationClasses:u}=ne(e),{roundedClasses:n}=J(e),{themeClasses:f}=se(e),{rtlClasses:d}=re(),g=B(e.extended===null?!!((h=t.extension)!=null&&h.call(t)):e.extended),s=b(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),y=b(()=>g.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ie({VBtn:{variant:"text"}}),P(()=>{var x;const i=!!(e.title||t.title),m=!!(t.image||e.image),S=(x=t.extension)==null?void 0:x.call(t);return g.value=e.extended===null?!!S:e.extended,c(e.tag,{class:q(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},v.value,a.value,u.value,n.value,f.value,d.value,e.class]),style:O([r.value,e.style])},{default:()=>[m&&T("div",{key:"image",class:"v-toolbar__image"},[t.image?c(R,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):c(ue,{key:"image-img",cover:!0,src:e.image},null)]),c(R,{defaults:{VTabs:{height:I(s.value)}}},{default:()=>{var o,V,C;return[T("div",{class:"v-toolbar__content",style:{height:I(s.value)}},[t.prepend&&T("div",{class:"v-toolbar__prepend"},[(o=t.prepend)==null?void 0:o.call(t)]),i&&c(ee,{key:"title",text:e.title},{text:t.title}),(V=t.default)==null?void 0:V.call(t),t.append&&T("div",{class:"v-toolbar__append"},[(C=t.append)==null?void 0:C.call(t)])])]}}),c(R,{defaults:{VTabs:{height:I(y.value)}}},{default:()=>[c(ce,null,{default:()=>[g.value&&T("div",{class:"v-toolbar__extension",style:{height:I(y.value)}},[S])]})]})]})}),{contentHeight:s,extensionHeight:y}}}),Xe=w({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function je(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=l;let v=0,r=0;const a=K(null),u=B(0),n=B(0),f=B(0),d=B(!1),g=B(!1),s=b(()=>Number(e.scrollThreshold)),y=b(()=>de((s.value-u.value)/s.value||0)),h=()=>{const i=a.value;if(!i||t&&!t.value)return;v=u.value,u.value="window"in i?i.pageYOffset:i.scrollTop;const m=i instanceof Window?document.documentElement.scrollHeight:i.scrollHeight;if(r!==m){r=m;return}g.value=u.value<v,f.value=Math.abs(u.value-s.value)};return H(g,()=>{n.value=n.value||u.value}),H(d,()=>{n.value=0}),ve(()=>{H(()=>e.scrollTarget,i=>{var S;const m=i?document.querySelector(i):window;m&&m!==a.value&&((S=a.value)==null||S.removeEventListener("scroll",h),a.value=m,a.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),ge(()=>{var i;(i=a.value)==null||i.removeEventListener("scroll",h)}),t&&H(t,h,{immediate:!0}),{scrollThreshold:s,currentScroll:u,currentThreshold:f,isScrollActive:d,scrollRatio:y,isScrollingUp:g,savedScroll:n}}const Oe=w({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...te(),...he(),...Xe(),height:{type:[Number,String],default:64}},"VAppBar"),qe=N()({name:"VAppBar",props:Oe(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:t}=l;const v=K(),r=me(e,"modelValue"),a=b(()=>{var V;const o=new Set(((V=e.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:o.has("hide"),fullyHide:o.has("fully-hide"),inverted:o.has("inverted"),collapse:o.has("collapse"),elevate:o.has("elevate"),fadeImage:o.has("fade-image")}}),u=b(()=>{const o=a.value;return o.hide||o.fullyHide||o.inverted||o.collapse||o.elevate||o.fadeImage||!r.value}),{currentScroll:n,scrollThreshold:f,isScrollingUp:d,scrollRatio:g}=je(e,{canScroll:u}),s=A(()=>a.value.hide||a.value.fullyHide),y=b(()=>e.collapse||a.value.collapse&&(a.value.inverted?g.value>0:g.value===0)),h=b(()=>e.flat||a.value.fullyHide&&!r.value||a.value.elevate&&(a.value.inverted?n.value>0:n.value===0)),i=b(()=>a.value.fadeImage?a.value.inverted?1-g.value:g.value:void 0),m=b(()=>{var C,W;if(a.value.hide&&a.value.inverted)return 0;const o=((C=v.value)==null?void 0:C.contentHeight)??0,V=((W=v.value)==null?void 0:W.extensionHeight)??0;return s.value?n.value<f.value||a.value.fullyHide?o+V:o:o+V});fe(()=>!!e.scrollBehavior,()=>{ye(()=>{s.value?a.value.inverted?r.value=n.value>f.value:r.value=d.value||n.value<f.value:r.value=!0})});const{ssrBootStyles:S}=$e(),{layoutItemStyles:x}=be({id:e.name,order:b(()=>parseInt(e.order,10)),position:A(()=>e.location),layoutSize:m,elementSize:B(void 0),active:r,absolute:A(()=>e.absolute)});return P(()=>{const o=j.filterProps(e);return c(j,E({ref:v,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...x.value,"--v-toolbar-image-opacity":i.value,height:void 0,...S.value},e.style]},o,{collapse:y.value,flat:h.value}),t)}),{}}}),Ge=N()({name:"VAppBarTitle",props:p(),setup(e,l){let{slots:t}=l;return P(()=>c(ee,E(e,{class:"v-app-bar-title"}),t)),{}}}),Qe=w({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Ne,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Y(),...we({location:"top end"}),...Q(),...F(),...G(),...Ce({transition:"scale-rotate-transition"}),..._e()},"VBadge"),Ze=N()({name:"VBadge",inheritAttrs:!1,props:Qe(),setup(e,l){const{backgroundColorClasses:t,backgroundColorStyles:v}=Z(()=>e.color),{roundedClasses:r}=J(e),{t:a}=Se(),{textColorClasses:u,textColorStyles:n}=Ve(()=>e.textColor),{themeClasses:f}=Te(),{locationStyles:d}=xe(e,!0,s=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(s)?Number(e.offsetY??0):["left","right"].includes(s)?Number(e.offsetX??0):0)),{dimensionStyles:g}=ke(e);return P(()=>{const s=Number(e.content),y=!e.max||isNaN(s)?e.content:s<=Number(e.max)?s:`${e.max}+`,[h,i]=Be(l.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return c(e.tag,E({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},i,{style:e.style}),{default:()=>{var m,S;return[T("div",{class:"v-badge__wrapper"},[(S=(m=l.slots).default)==null?void 0:S.call(m),c(Pe,{transition:e.transition},{default:()=>{var x,o;return[Ie(T("span",E({class:["v-badge__badge",f.value,t.value,r.value,u.value],style:[v.value,n.value,g.value,e.inline?{}:d.value],"aria-atomic":"true","aria-label":a(e.label,s),"aria-live":"polite",role:"status"},h),[e.dot?void 0:l.slots.badge?(o=(x=l.slots).badge)==null?void 0:o.call(x):e.icon?c(Le,{icon:e.icon},null):y]),[[He,e.modelValue]])]}})])]}})}),{}}}),tt={__name:"default",setup(e){const l=Ee(),t=Re(),v=Ae(),r=b(()=>[{title:"首頁",to:"/",show:!0},{title:"最新消息",to:"/firstnews",show:!l.isLoggedIn},{title:"公車資訊",to:"/businfo",show:!l.isLoggedIn},{title:"註冊",to:"/register",show:!l.isLoggedIn},{title:"登入",to:"/login",show:!l.isLoggedIn},{title:"管理",to:"/admin",show:l.isLoggedIn&&l.isAdmin}]),a=async()=>{try{await ze.logout()}catch(u){console.log(u)}l.logout(),v.push("/"),t({text:"登出成功! ",snackbarProps:{color:"green"}})};return(u,n)=>{const f=De("router-view");return k(),D(M,null,[c(qe,null,{default:_(()=>[c(Ye,{class:"d-flex align-center"},{default:_(()=>[c(Ge,null,{default:_(()=>n[0]||(n[0]=[z("公車車型介紹",-1)])),_:1,__:[0]}),(k(!0),D(M,null,Me(r.value,d=>(k(),D(M,{key:d.to},[d.show?(k(),L(X,{key:0,"prepend-icon":d.icon,to:d.to},{default:_(()=>[z(Ue(d.title)+" ",1),d.to==="/bus"&&$(l).cartTotal>0?(k(),L(Ze,{key:0,color:"red",content:$(l).cartTotal,floating:""},null,8,["content"])):U("",!0)]),_:2},1032,["prepend-icon","to"])):U("",!0)],64))),128)),$(l).isLoggedIn?(k(),L(X,{key:0,onClick:a},{default:_(()=>n[1]||(n[1]=[z("登出",-1)])),_:1,__:[1]})):U("",!0)]),_:1})]),_:1}),c(Fe,null,{default:_(()=>[(k(),L(f,{key:u.$route.fullPath}))]),_:1})],64)}}};export{tt as default};
