import{ai as _,aj as w,W as x,ap as S,ak as k,_ as y,Y as t,P as s,O as q,bz as B,$ as a,bj as m,an as F,am as C}from"./index---Z0J0h8.js";import{u as M,c as N,a as c,b as p,V as P}from"./index.esm-DvVMQAbk.js";import{b as f}from"./route-block-B_A1xBdJ.js";import{V as U,a as V}from"./VRow-CzsFco1V.js";import{V as $}from"./VDivider-4dWjcUSQ.js";import{V as h}from"./VContainer-B4QwfHSm.js";const j={__name:"login",setup(R){const d=_(),b=w(),g=x(),l=M({validationSchema:N({account:c().required("帳號是必填的"),password:c().required("密碼是必填的").min(4,"密碼至少需要 4 個字元").max(20,"密碼最多只能有 20 個字元")})}),u=p("account"),n=p("password"),v=l.handleSubmit(async i=>{var e,r;try{const{data:o}=await S.login({username:i.account,password:i.password});console.log(o),g.login(o.user),d({text:"登入成功！",snackbarProps:{color:"green"}}),b.push("/")}catch(o){console.log(o),d({text:((r=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:r.message)||"登入失敗，請稍後再試！",snackbarProps:{color:"red"}})}});return(i,e)=>(y(),k(h,null,{default:t(()=>[s(U,null,{default:t(()=>[s(V,{cols:"12"},{default:t(()=>e[2]||(e[2]=[q("h1",{class:"text-center"},"登入",-1)])),_:1,__:[2]}),s($),s(V,{cols:"12"},{default:t(()=>[s(P,{disabled:a(l).isSubmitting.value,onSubmit:B(a(v),["prevent"])},{default:t(()=>[s(m,{modelValue:a(u).value.value,"onUpdate:modelValue":e[0]||(e[0]=r=>a(u).value.value=r),"error-messages":a(u).errorMessage.value,label:"帳號",required:""},null,8,["modelValue","error-messages"]),s(m,{modelValue:a(n).value.value,"onUpdate:modelValue":e[1]||(e[1]=r=>a(n).value.value=r),counter:"","error-messages":a(n).errorMessage.value,label:"密碼",maxlength:"20",minlength:"4",required:"",type:"password"},null,8,["modelValue","error-messages"]),s(F,{loading:a(l).isSubmitting.value,type:"submit"},{default:t(()=>e[3]||(e[3]=[C("登入",-1)])),_:1,__:[3]},8,["loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof f=="function"&&f(j);export{j as default};
